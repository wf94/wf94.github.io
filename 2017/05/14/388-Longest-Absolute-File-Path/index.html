<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>388 Longest Absolute File Path | 打满鸡血来刷题</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">388 Longest Absolute File Path</h1><a id="logo" href="/.">打满鸡血来刷题</a><p class="description">心得 · 笔记 · 分享</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">388 Longest Absolute File Path</h1><div class="post-meta">May 14, 2017<span> | </span><span class="category"><a href="/categories/LeetCode/">LeetCode</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><p>Suppose we abstract our file system by a string in the following manner:</p>
<p>The string <code>&quot;dir\n\tsubdir1\n\tsubdir2\n\t\tfile.ext&quot;</code> represents:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">dir</div><div class="line">    subdir1</div><div class="line">    subdir2</div><div class="line">        file.ext</div></pre></td></tr></table></figure>
<p>The directory <code>dir</code> contains an empty sub-directory <code>subdir1</code> and a sub-directory <code>subdir2</code> containing a file <code>file.ext</code>.</p>
<p>The string <code>&quot;dir\n\tsubdir1\n\t\tfile1.ext\n\t\tsubsubdir1\n\tsubdir2\n\t\tsubsubdir2\n\t\t\tfile2.ext&quot;</code> represents:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">dir</div><div class="line">    subdir1</div><div class="line">        file1.ext</div><div class="line">        subsubdir1</div><div class="line">    subdir2</div><div class="line">        subsubdir2</div><div class="line">            file2.ext</div></pre></td></tr></table></figure>
<p>The directory <code>dir</code> contains two sub-directories <code>subdir1</code> and <code>subdir2</code>. <code>subdir1</code> contains a file <code>file1.ext</code> and an empty second-level sub-directory <code>subsubdir1</code>. <code>subdir2</code> contains a second-level sub-directory <code>subsubdir2</code> containing a file <code>file2.ext</code>.</p>
<p>We are interested in finding the longest (number of characters) absolute path to a file within our file system. For example, in the second example above, the longest absolute path is <code>&quot;dir/subdir2/subsubdir2/file2.ext&quot;</code>, and its length is <code>32</code> (not including the double quotes).</p>
<p>Given a string representing the file system in the above format, return the length of the longest absolute path to file in the abstracted file system. If there is no file in the system, return <code>0</code>.</p>
<p><strong>Note:</strong></p>
<ul>
<li>The name of a file contains at least a <code>.</code> and an extension.</li>
<li>The name of a directory or sub-directory will not contain a <code>.</code>.</li>
</ul>
<p>Time complexity required: <code>O(n)</code> where <code>n</code> is the size of the input string.</p>
<p>Notice that <code>a/aa/aaa/file1.txt</code> is not the longest file path, if there is another path <code>aaaaaaaaaaaaaaaaaaaaa/sth.png</code>.</p>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>利用栈来处理层次的问题。就像函数的调用一样。所以一开始下笔码代码的时候一定要想清楚怎么做，拿什么样的数据结构来做，不然会一团乱麻。</p>
<p>利用stringbuffer存储临时的string。这样可以降低时间复杂度。</p>
<p>需要判断这个string是不是文件，所以需要判断’.’是否在string当中。</p>
<p>需要判断‘\t’在不在这个string当中，有几个’\t’。 </p>
<p>需要利用栈来存储string的长度数据。在栈当中，我们利用数据为负数，来表示这个字符串是文件。但是利用这样的方法存储‘是否为文件’的状态，一定要注意求取绝对值，不然就会影响答案的准确性。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthLongestPath</span><span class="params">(String input)</span> </span>&#123;</div><div class="line">        StringBuffer tmp = <span class="keyword">new</span> StringBuffer();</div><div class="line">        <span class="comment">// List&lt;String&gt; result = new ArrayList&lt;String&gt;();</span></div><div class="line">        <span class="comment">// List&lt;String&gt; result_tmp = new ArrayList&lt;String&gt;();</span></div><div class="line">        <span class="comment">// int result_tmp_length = 0;</span></div><div class="line">        Stack&lt;Integer&gt; result = <span class="keyword">new</span> Stack&lt;Integer&gt;();</div><div class="line">        <span class="keyword">boolean</span> isFile = <span class="keyword">false</span>;</div><div class="line">        <span class="keyword">int</span> result_length = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> layer_count = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> final_length = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; input.length(); i++)&#123;</div><div class="line"></div><div class="line">            <span class="keyword">char</span> cur = input.charAt(i);</div><div class="line">            <span class="keyword">if</span>(cur == <span class="string">'.'</span>) isFile = <span class="keyword">true</span>;</div><div class="line">            <span class="keyword">if</span>(cur == <span class="string">'\t'</span>) layer_count++;</div><div class="line"></div><div class="line">            <span class="keyword">if</span>(cur != <span class="string">'\n'</span>)&#123;</div><div class="line">                tmp.append(cur);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="keyword">if</span>(cur == <span class="string">'\n'</span> || i == input.length() - <span class="number">1</span>)&#123;</div><div class="line">                <span class="comment">//Calculate the temporary word length.</span></div><div class="line">                String cur_tmp = tmp.toString();</div><div class="line">                tmp.setLength(<span class="number">0</span>);</div><div class="line">                <span class="keyword">int</span> cur_length = cur_tmp.length() - layer_count + <span class="number">1</span>;</div><div class="line">                <span class="keyword">if</span>(isFile) cur_length = -cur_length;</div><div class="line">                isFile = <span class="keyword">false</span>;</div><div class="line">                <span class="comment">//Reset the status of result Stack</span></div><div class="line">                <span class="keyword">if</span>(result.size() &gt; layer_count)&#123;</div><div class="line">                    <span class="keyword">int</span> nums = result.size() - layer_count;</div><div class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; nums ; j++)&#123;</div><div class="line">                        <span class="keyword">if</span>(result.peek() &lt; <span class="number">0</span>) result_length += result.pop();</div><div class="line">                        <span class="keyword">else</span> result_length -= result.pop();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                result.push(cur_length);</div><div class="line"></div><div class="line">                <span class="keyword">if</span>(cur_length &lt; <span class="number">0</span>)&#123;</div><div class="line">                    result_length += (-cur_length);</div><div class="line">                    <span class="keyword">if</span>(result_length &gt; final_length) final_length = result_length;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">else</span>&#123;</div><div class="line">                    result_length += cur_length;</div><div class="line">                &#125;</div><div class="line">                <span class="comment">//Initialize other variables</span></div><div class="line">                layer_count = <span class="number">0</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(final_length == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">return</span> final_length - <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://wf94.github.io/2017/05/14/388-Longest-Absolute-File-Path/" data-id="cj4h6bmx200dv1td3h5nt7bsp" class="article-share-link">分享到</a><div class="tags"><a href="/tags/Medium/">Medium</a></div><div class="post-nav"><a href="/2017/05/15/390-Elimination-Game/" class="pre">390 Elimination Game</a><a href="/2017/05/13/387-First-Unique-Character-in-a-String/" class="next">387 First Unique Character in a String</a></div><div id="container"></div><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script><script>var gitment = new Gitment({
  owner: 'wf94',
  repo: 'github-pages-comment',
  oauth: {
    client_id: '7b0276b84a27a192444a',
    client_secret: '536da99ff5aa11deb7c17dd76e824e2c601f7464',
  },
})
gitment.render('container')</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/LeetCode/">LeetCode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tech/">Tech</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Binary-Search/" style="font-size: 15px;">Binary Search</a> <a href="/tags/Array/" style="font-size: 15px;">Array</a> <a href="/tags/Easy/" style="font-size: 15px;">Easy</a> <a href="/tags/Math/" style="font-size: 15px;">Math</a> <a href="/tags/Two-Pointers/" style="font-size: 15px;">Two Pointers</a> <a href="/tags/Medium/" style="font-size: 15px;">Medium</a> <a href="/tags/String/" style="font-size: 15px;">String</a> <a href="/tags/Linked-List/" style="font-size: 15px;">Linked List</a> <a href="/tags/Backtracking/" style="font-size: 15px;">Backtracking</a> <a href="/tags/Dynamic-Programming/" style="font-size: 15px;">Dynamic Programming</a> <a href="/tags/Divide-and-Conquer/" style="font-size: 15px;">Divide and Conquer</a> <a href="/tags/Stack/" style="font-size: 15px;">Stack</a> <a href="/tags/Hash-Table/" style="font-size: 15px;">Hash Table</a> <a href="/tags/Sort/" style="font-size: 15px;">Sort</a> <a href="/tags/Bit-Manipulation/" style="font-size: 15px;">Bit Manipulation</a> <a href="/tags/Tree/" style="font-size: 15px;">Tree</a> <a href="/tags/BFS/" style="font-size: 15px;">BFS</a> <a href="/tags/DFS/" style="font-size: 15px;">DFS</a> <a href="/tags/Depth-first-Search/" style="font-size: 15px;">Depth-first Search</a> <a href="/tags/Design/" style="font-size: 15px;">Design</a> <a href="/tags/Heap/" style="font-size: 15px;">Heap</a> <a href="/tags/Brainteaser/" style="font-size: 15px;">Brainteaser</a> <a href="/tags/Greedy/" style="font-size: 15px;">Greedy</a> <a href="/tags/LeetCode/" style="font-size: 15px;">LeetCode</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://wf.pe.hu" title="闲情逸致" target="_blank">闲情逸致</a><ul></ul><a href="http://wf.pe.hu/tech/tech-blog/" title="留言板" target="_blank">留言板</a><ul></ul><a href="http://dir.scmor.com/google" title="谷歌搜索（墙内）" target="_blank">谷歌搜索（墙内）</a><ul></ul><a href="http://tianyuh.com" title="塞外麾下炙" target="_blank">塞外麾下炙</a><ul></ul><a href="https://www.xiadong.info/" title="Shell32" target="_blank">Shell32</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow"> 2017, Fan Wu.打满鸡血来刷题.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>